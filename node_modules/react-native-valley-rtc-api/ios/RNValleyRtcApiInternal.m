#import "RNValleyRtcApiInternal.h"
#import <ValleyRtcAPI/ValleyRtcAPI_OC.h>

@implementation RNValleyRtcApiInternal

//在.m文件中声明静态的类实例，不放在.h中是为了让instance私有
static RNValleyRtcApiInternal* instance = nil;

+(RNValleyRtcApiInternal*)GetInstance {
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        instance = [[self alloc]init];
    });
    return instance;
}

-(void)InitSDK:(nonnull NSString*)workfolder localconfig: (nullable NSString*)localconfig {
	[ValleyRtcAPI InitSDK:workfolder localconfig:localconfig];
}

-(void)SetAuthoKey:(nonnull NSString*)authokey {
	[ValleyRtcAPI SetAuthoKey:authokey];
}

-(void)CleanSDK {
	[ValleyRtcAPI CleanSDK];
}

-(nullable NSString*)GetErrDesc:(int)ec {
	return [ValleyRtcAPI GetErrDesc:ec];
}

-(nonnull NSString*)GetSDKVersion {
	return [ValleyRtcAPI GetSDKVersion];
}

-(nullable IRtcChannel*)CreateChannel:(bool)withVideo {
	return [ValleyRtcAPI CreateChannel:withVideo];
}

@end