#import "RNValleyRtcApiInternal.h"
#import <ValleyRtcAPI/ValleyRtcAPI_OC.h>

@implementation RNValleyRtcApiInternal

static RNValleyRtcApiInternal* instance = nil;

+(RNValleyRtcApiInternal*)GetInstance {
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        instance = [[self alloc]init];
    });
    return instance;
}

-(void)InitSDK:(nonnull NSString*)workfolder localconfig: (nullable NSString*)localconfig {
#if !TARGET_OS_SIMULATOR
	[ValleyRtcAPI InitSDK:workfolder localconfig:localconfig];
#endif
}

-(void)SetAuthoKey:(nonnull NSString*)authokey {
#if !TARGET_OS_SIMULATOR
	[ValleyRtcAPI SetAuthoKey:authokey];
#endif
}

-(void)CleanSDK {
#if !TARGET_OS_SIMULATOR
	[ValleyRtcAPI CleanSDK];
#endif
}

-(nullable NSString*)GetErrDesc:(int)ec {
#if TARGET_OS_SIMULATOR
    return @"SIMULATOR";
#else
	return [ValleyRtcAPI GetErrDesc:ec];
#endif
}

-(nonnull NSString*)GetSDKVersion {
#if TARGET_OS_SIMULATOR
    return @"";
#else
	return [ValleyRtcAPI GetSDKVersion];
#endif
}

-(nullable IRtcChannel*)CreateChannel:(BOOL)withVideo {
#if TARGET_OS_SIMULATOR
    return nil;
#else
	return [ValleyRtcAPI CreateChannel:withVideo];
#endif
}

@end
